import { useId } from 'react';
import CryptoJS from 'crypto-js';

export interface ProfileProps {
  width?: number;
  height?: number;
  email?: string;
}

const toGravatar = (email: string) =>
  `https://gravatar.com/avatar/${CryptoJS.MD5(email.trim().toLowerCase()).toString()}?d=identicon`;

export const Profile = ({ width = 60, height = 60, email }: ProfileProps) => {
  if (email)
    return (
      <img
        src={toGravatar(email)}
        width={width}
        height={height}
        style={{
          borderRadius: '50%',
        }}
      />
    );

  const maskId = useId();

  return (
    <svg xmlns="http://www.w3.org/2000/svg" width={width} height={height} viewBox="0 0 60 60" fill="none">
      <mask id={`profile-${maskId}`} type="luminance" maskUnits="userSpaceOnUse" x="0" y="0" width="60" height="60">
        <path
          d="M30 60C46.5685 60 60 46.5685 60 30C60 13.4315 46.5685 0 30 0C13.4315 0 0 13.4315 0 30C0 46.5685 13.4315 60 30 60Z"
          fill="white"
        />
      </mask>
      <g mask={`url(#profile-${maskId})`}>
        <path
          d="M30 60C46.5685 60 60 46.5685 60 30C60 13.4315 46.5685 0 30 0C13.4315 0 0 13.4315 0 30C0 46.5685 13.4315 60 30 60Z"
          fill="#BCC0C4"
        />
        <path d="M60 51H0V60H60V51Z" fill="white" />
        <path
          d="M37.8 25.2C41.445 25.2 44.4 22.2451 44.4 18.6C44.4 14.9549 41.445 12 37.8 12C34.1549 12 31.2 14.9549 31.2 18.6C31.2 22.2451 34.1549 25.2 37.8 25.2Z"
          fill="white"
        />
        <path
          d="M31.9674 48C32.0718 48 32.1726 47.9868 32.268 47.9622C32.172 47.9868 32.0712 48 31.9674 48Z"
          fill="black"
        />
        <path
          d="M33.1602 46.671C33.1578 46.6482 33.1548 46.6254 33.1506 46.6026C33.1542 46.6254 33.1578 46.6482 33.1602 46.671Z"
          fill="black"
        />
        <path
          d="M38.3999 27.6H37.1999C34.1687 27.6 31.4657 29.0058 29.7065 31.2H29.9675C30.8189 31.2 31.6451 31.503 32.2943 32.0532C32.9435 32.6034 33.3785 33.3684 33.5183 34.2084L35.5181 46.2084C35.6195 46.8174 35.5613 47.4324 35.3609 48H36.6461C36.2363 47.2932 36.0005 46.4742 36.0005 45.6C36.0005 42.9534 38.1539 40.8 40.8005 40.8C41.4623 40.8 42.0005 40.2618 42.0005 39.6V36C42.0005 35.337 42.5375 34.8 43.2005 34.8C43.8635 34.8 44.4005 35.337 44.4005 36V39.6C44.4005 41.5848 42.7853 43.2 40.8005 43.2C39.4769 43.2 38.4005 44.2764 38.4005 45.6C38.4005 46.9236 39.4769 48 40.8005 48H43.2005C45.8513 48 48.0005 45.8508 48.0005 43.2V37.2C48.0005 31.8978 43.7027 27.6 38.4005 27.6H38.3999Z"
          fill="white"
        />
        <path
          d="M13.0632 33.6078C13.0182 33.6126 12.9744 33.6204 12.9312 33.63C12.9096 33.6348 12.8886 33.6402 12.8676 33.6462C12.8256 33.6582 12.7842 33.6726 12.7446 33.6888C12.6846 33.7134 12.627 33.7428 12.573 33.7764C12.5442 33.7938 12.5166 33.813 12.4896 33.8328C12.4656 33.8508 12.4416 33.8694 12.4188 33.8886C12.387 33.9162 12.3564 33.9456 12.327 33.9762C12.2982 34.0068 12.2706 34.0392 12.2454 34.0728C12.2328 34.0896 12.2202 34.107 12.2082 34.1244C12.1608 34.194 12.12 34.2696 12.0882 34.3482C12.0642 34.4076 12.0444 34.4688 12.03 34.5318C12.0252 34.5528 12.021 34.5744 12.0174 34.5954C12.0138 34.617 12.0108 34.6386 12.0084 34.6602C12.0006 34.7256 11.9988 34.7922 12.0024 34.86C12.0036 34.8828 12.0054 34.905 12.0078 34.9278C12.0102 34.9506 12.0132 34.9734 12.0174 34.9962L13.0176 40.9962L14.0178 46.9962C14.0226 47.0232 14.028 47.0502 14.034 47.0766C14.0466 47.1294 14.0622 47.181 14.0814 47.2302C14.091 47.2548 14.1012 47.2794 14.1126 47.3034C14.142 47.3676 14.1774 47.4282 14.217 47.4852C14.2566 47.5422 14.301 47.5956 14.3502 47.6442C14.3682 47.6628 14.3874 47.6802 14.4066 47.6976C14.4648 47.7492 14.5278 47.7948 14.595 47.8344C14.7144 47.9046 14.8464 47.9544 14.9868 47.9796C15.057 47.9922 15.129 47.9988 15.2022 47.9988H28.8018C28.1388 47.9988 27.6018 47.4618 27.6018 46.7988V37.1988C27.6018 35.9256 27.8502 34.7106 28.3002 33.5988H13.2018C13.1556 33.5988 13.11 33.6012 13.065 33.6066L13.0632 33.6078Z"
          fill="white"
        />
        <path
          d="M27.6 46.8C27.6 47.463 28.137 48 28.8 48H31.9674C32.0718 48 32.1726 47.9868 32.268 47.9622C32.2998 47.9538 32.3316 47.9442 32.3622 47.934C32.4852 47.8914 32.5992 47.829 32.6994 47.751C32.733 47.7252 32.7648 47.6976 32.7954 47.6682C32.826 47.6388 32.8548 47.6082 32.8824 47.5758C32.91 47.5434 32.9352 47.5098 32.9592 47.475C32.9832 47.4402 33.0048 47.4036 33.0252 47.3664C33.045 47.3292 33.0636 47.2908 33.0792 47.2512C33.1032 47.1918 33.123 47.1306 33.1374 47.0676C33.147 47.0256 33.1542 46.9824 33.1596 46.9392C33.1674 46.8738 33.1692 46.8072 33.1656 46.7394C33.1644 46.7166 33.1626 46.6944 33.1602 46.6716C33.1578 46.6488 33.1548 46.626 33.1506 46.6032L32.1504 40.6032L31.1502 34.6032C31.1424 34.5582 31.1328 34.5138 31.1202 34.4706C31.1076 34.4274 31.0932 34.3854 31.0764 34.3446C31.068 34.3242 31.059 34.3038 31.0494 34.284C31.0302 34.2444 31.0092 34.206 30.9864 34.1688C30.975 34.1502 30.963 34.1322 30.9504 34.1142C30.8712 34.0002 30.7722 33.9012 30.66 33.8214C30.6318 33.8016 30.603 33.7824 30.573 33.765C30.5304 33.7398 30.486 33.7188 30.4404 33.699C30.39 33.6774 30.3384 33.6582 30.285 33.6432C30.2172 33.6246 30.147 33.6114 30.075 33.6054C30.039 33.6024 30.003 33.6006 29.9658 33.6006H28.2972C27.8472 34.7124 27.5988 35.9274 27.5988 37.2006V46.8006L27.6 46.8Z"
          fill="white"
        />
        <path
          d="M13.2 33.6C13.1538 33.6 13.1082 33.6024 13.0632 33.6078C13.1082 33.603 13.1538 33.6 13.2 33.6Z"
          fill="white"
        />
        <path
          d="M14.0802 47.2314C14.061 47.1816 14.0454 47.1306 14.0328 47.0778C14.0454 47.1306 14.061 47.1822 14.0802 47.2314Z"
          fill="white"
        />
        <path
          d="M30.9515 34.1136C30.8723 33.9996 30.7733 33.9006 30.6611 33.8208C30.7739 33.9006 30.8723 33.9996 30.9515 34.1136Z"
          fill="white"
        />
        <path
          opacity="0.1"
          d="M30 2.4C33.7272 2.4 37.3416 3.1296 40.7424 4.5678C44.0286 5.958 46.9806 7.9482 49.5162 10.4838C52.0518 13.0194 54.042 15.9714 55.4322 19.2576C56.871 22.659 57.6 26.2728 57.6 30C57.6 33.7272 56.8704 37.3416 55.4322 40.7424C54.042 44.0286 52.0518 46.9806 49.5162 49.5162C46.9806 52.0518 44.0286 54.042 40.7424 55.4322C37.341 56.871 33.7272 57.6 30 57.6C26.2728 57.6 22.6584 56.8704 19.2576 55.4322C15.9714 54.042 13.0194 52.0518 10.4838 49.5162C7.9482 46.9806 5.958 44.0286 4.5678 40.7424C3.129 37.341 2.4 33.7272 2.4 30C2.4 26.2728 3.1296 22.6584 4.5678 19.2576C5.958 15.9714 7.9482 13.0194 10.4838 10.4838C13.0194 7.9482 15.9714 5.958 19.2576 4.5678C22.659 3.129 26.2728 2.4 30 2.4ZM30 0C13.4316 0 0 13.4316 0 30C0 46.5684 13.4316 60 30 60C46.5684 60 60 46.5684 60 30C60 13.4316 46.5684 0 30 0Z"
          fill="black"
        />
      </g>
    </svg>
  );
};
